<div class="max-w-4xl mx-auto mt-10">
  <div class="bg-gray-800 rounded-2xl shadow-lg p-8 mb-8">
    <h2 class="text-3xl font-bold text-orange-400 uppercase mb-2">{{theater.name}}</h2>
    <p class="text-gray-400 mb-2">{{theater.location}}</p>
    <p class="text-gray-500 mb-4">{{theater.distance}} away</p>
    <div *ngFor="let screen of theater.screens" class="mb-6">
      <div class="flex justify-between items-center mb-2">
        <div>
          <h3 class="text-lg font-bold text-white">{{screen.name}}</h3>
          <p class="text-gray-400 text-xs">{{screen.type}}</p>
        </div>
        <div class="flex space-x-2">
          <button class="text-blue-400 hover:text-blue-300" title="Directions"><i class="fas fa-directions"></i></button>
          <button class="text-blue-400 hover:text-blue-300" title="Info"><i class="fas fa-info-circle"></i></button>
          <button class="text-yellow-400 hover:text-yellow-300" title="Favorite"><i class="fas fa-star"></i></button>
        </div>
      </div>
      <div class="flex flex-wrap gap-3">
        <button *ngFor="let time of screen.showtimes" (click)="openSeatSelection(screen, time)"
                class="px-5 py-2 bg-transparent border border-orange-400 text-white hover:bg-orange-900 hover:bg-opacity-30 rounded-full font-medium transition-all hover:scale-105">
          {{time}}
        </button>
      </div>
    </div>
  </div>

  <!-- Seat Selection Modal -->
  <div *ngIf="showSeatSelection" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in">
    <div class="bg-gray-800 p-6 rounded-2xl max-w-2xl w-full shadow-2xl">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-white">Select Seats - {{selectedScreen.name}} ({{selectedTime}})</h2>
        <button (click)="showSeatSelection = false" class="text-gray-400 hover:text-white"><i class="fas fa-times text-2xl"></i></button>
      </div>
      <div class="w-full h-10 bg-gradient-to-b from-gray-600 to-gray-900 rounded-t-lg mb-6 flex items-center justify-center text-white font-bold text-lg shadow-inner">SCREEN</div>
      <div class="grid grid-cols-5 gap-2 mb-8">
        <button *ngFor="let seat of seats" (click)="toggleSeat(seat)"
                [ngClass]="{'bg-green-600 hover:bg-green-700': seat.selected, 'bg-gray-600 hover:bg-gray-500': !seat.selected && !seat.occupied, 'bg-red-600 cursor-not-allowed': seat.occupied}"
                class="w-10 h-10 rounded-lg text-sm font-semibold text-white transition-transform transform hover:scale-110"
                [disabled]="seat.occupied">
          {{seat.number}}
        </button>
      </div>
      <div class="flex justify-center gap-4 mb-6">
        <div class="flex items-center"><div class="w-6 h-6 bg-green-600 rounded-lg mr-2"></div><span class="text-white">Selected</span></div>
        <div class="flex items-center"><div class="w-6 h-6 bg-gray-600 rounded-lg mr-2"></div><span class="text-white">Available</span></div>
        <div class="flex items-center"><div class="w-6 h-6 bg-red-600 rounded-lg mr-2"></div><span class="text-white">Occupied</span></div>
      </div>
      <div class="flex justify-between items-center">
        <div>
          <p class="text-white text-lg">Selected Seats: {{selectedSeats.join(', ')}}</p>
          <p class="text-white text-lg">Total: ₹{{selectedSeats.length * ticketPrice}}</p>
        </div>
        <div class="flex gap-4">
          <button (click)="showSeatSelection = false" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-full">Cancel</button>
          <button (click)="proceedToPayment()" [disabled]="selectedSeats.length === 0" class="bg-blue-700 hover:bg-blue-800 text-white px-6 py-3 rounded-full">Proceed to Payment</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div *ngIf="showPayment" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in">
    <div class="bg-gray-800 p-6 rounded-2xl max-w-md w-full shadow-2xl">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-white">Payment - {{selectedScreen.name}} ({{selectedTime}})</h2>
        <button (click)="showPayment = false" class="text-gray-400 hover:text-white"><i class="fas fa-times text-2xl"></i></button>
      </div>
      <div class="mb-6">
        <h3 class="text-xl font-semibold text-white mb-4">Select Payment Method</h3>
        <div class="grid grid-cols-3 gap-4">
          <button (click)="selectPaymentMethod('upi')" [ngClass]="{'bg-blue-700': paymentMethod === 'upi', 'bg-gray-600': paymentMethod !== 'upi'}" class="p-4 rounded-lg text-white font-semibold">UPI</button>
          <button (click)="selectPaymentMethod('card')" [ngClass]="{'bg-blue-700': paymentMethod === 'card', 'bg-gray-600': paymentMethod !== 'card'}" class="p-4 rounded-lg text-white font-semibold">Card</button>
          <button (click)="selectPaymentMethod('netbanking')" [ngClass]="{'bg-blue-700': paymentMethod === 'netbanking', 'bg-gray-600': paymentMethod !== 'netbanking'}" class="p-4 rounded-lg text-white font-semibold">Net Banking</button>
        </div>
      </div>
      <div *ngIf="paymentMethod === 'upi'" class="mb-6">
        <label class="block text-white mb-2">UPI ID</label>
        <input [(ngModel)]="upiId" type="text" placeholder="example@upi" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600">
      </div>
      <div *ngIf="paymentMethod === 'card'" class="mb-6">
        <label class="block text-white mb-2">Card Number</label>
        <input [(ngModel)]="cardNumber" type="text" placeholder="1234 5678 9012 3456" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600">
        <div class="grid grid-cols-2 gap-4 mt-4">
          <div>
            <label class="block text-white mb-2">Expiry</label>
            <input [(ngModel)]="cardExpiry" type="text" placeholder="MM/YY" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600">
          </div>
          <div>
            <label class="block text-white mb-2">CVV</label>
            <input [(ngModel)]="cardCvv" type="text" placeholder="123" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600">
          </div>
        </div>
      </div>
      <div *ngIf="paymentMethod === 'netbanking'" class="mb-6">
        <label class="block text-white mb-2">Select Bank</label>
        <select [(ngModel)]="bank" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600">
          <option value="">Select Bank</option>
          <option value="sbi">State Bank of India</option>
          <option value="hdfc">HDFC Bank</option>
          <option value="icici">ICICI Bank</option>
        </select>
      </div>
      <div class="flex justify-between">
        <button (click)="showPayment = false" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-full">Cancel</button>
        <button (click)="processPayment()" class="bg-green-700 hover:bg-green-800 text-white px-6 py-3 rounded-full" [disabled]="isProcessing">
          <span *ngIf="!isProcessing">Pay ₹{{selectedSeats.length * ticketPrice}}</span>
          <span *ngIf="isProcessing">Processing...</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div *ngIf="showConfirmation" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in">
    <div class="bg-gray-800 p-6 rounded-2xl max-w-md w-full shadow-2xl">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-white">Booking Confirmed!</h2>
        <button (click)="closeConfirmation()" class="text-gray-400 hover:text-white"><i class="fas fa-times text-2xl"></i></button>
      </div>
      <div class="bg-gray-700 p-6 rounded-lg">
        <p class="text-white text-lg mb-2"><strong>Theater:</strong> {{theater.name}}</p>
        <p class="text-white text-lg mb-2"><strong>Screen:</strong> {{selectedScreen?.name}}</p>
        <p class="text-white text-lg mb-2"><strong>Time:</strong> {{selectedTime}}</p>
        <p class="text-white text-lg mb-2"><strong>Seats:</strong> {{selectedSeats.join(', ')}}</p>
        <p class="text-white text-lg mb-2"><strong>Total Paid:</strong> ₹{{selectedSeats.length * ticketPrice}}</p>
        <p class="text-white text-lg"><strong>Booking ID:</strong> {{bookingId}}</p>
      </div>
      <div class="flex justify-end mt-6">
        <button (click)="closeConfirmation()" class="bg-blue-700 hover:bg-blue-800 text-white px-6 py-3 rounded-full">Close</button>
      </div>
    </div>
  </div>
</div>
