<div class="container-fluid py-4">
  <div class="card shadow mb-4">
    <div class="card-header py-3 bg-primary text-white">
      <h2 class="m-0 font-weight-bold">Movie Ticket Analytics Dashboard</h2>
      <p class="m-0">Generate and analyze comprehensive booking and sales reports</p>
    </div>

    <div class="card-body">
      <form [formGroup]="reportForm" class="mb-4">
        <div class="row g-3">
          <div class="col-md-3">
            <label for="reportType" class="form-label">Report Type</label>
            <select class="form-select" formControlName="reportType" (change)="onReportTypeChange()">
              <option *ngFor="let type of reportTypes" [value]="type.id">{{type.name}}</option>
            </select>
            <div *ngIf="reportForm.get('reportType')?.invalid && reportForm.get('reportType')?.touched" 
                 class="text-danger small">
              Report type is required
            </div>
          </div>

          <div class="col-md-3">
            <label for="datePreset" class="form-label">Date Range</label>
            <select class="form-select" formControlName="datePreset" (change)="onDatePresetChange()">
              <option *ngFor="let preset of datePresets" [value]="preset.value">{{preset.name}}</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="startDate" class="form-label">Start Date</label>
            <input type="date" class="form-control" formControlName="startDate">
            <div *ngIf="reportForm.get('startDate')?.invalid && reportForm.get('startDate')?.touched" 
                 class="text-danger small">
              Start date is required
            </div>
          </div>

          <div class="col-md-2">
            <label for="endDate" class="form-label">End Date</label>
            <input type="date" class="form-control" formControlName="endDate">
            <div *ngIf="reportForm.get('endDate')?.invalid && reportForm.get('endDate')?.touched" 
                 class="text-danger small">
              End date is required
            </div>
          </div>

          <div class="col-md-2">
            <label for="movie" class="form-label">Movie</label>
            <select class="form-select" formControlName="movie">
              <option [value]="null">All Movies</option>
              <option *ngFor="let movie of movies" [value]="movie.id">{{movie.name}}</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="chartType" class="form-label">Chart Type</label>
            <select class="form-select" formControlName="chartType" (change)="onChartTypeChange()">
              <option *ngFor="let type of chartTypes" [value]="type">{{type | titlecase}}</option>
            </select>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-12 text-end">
            <button class="btn btn-primary px-4" (click)="generateReport()" 
                    [disabled]="isLoading || reportForm.invalid">
              <i class="bi bi-bar-chart me-2"></i>
              Generate Report
              <span *ngIf="isLoading" class="spinner-border spinner-border-sm ms-2"></span>
            </button>
          </div>
        </div>
      </form>

      <!-- Rest of the template remains the same, with updated summary statistics -->
      <div *ngIf="filteredData.length > 0" class="animate__animated animate__fadeIn">
        <div class="card border-left-primary shadow mb-4">
          <div class="card-body py-3">
            <div class="row no-gutters align-items-center">
              <div class="col mr-2">
                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                  Summary Statistics
                </div>
                <div class="row">
                  <div class="col">
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                      Total Records: {{filteredData.length}}
                    </div>
                  </div>
                  <div class="col" *ngIf="selectedReportType === 1">
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                      Total Sales: ${{getTotalSales().toFixed(2)}}
                    </div>
                  </div>
                  <div class="col" *ngIf="selectedReportType === 2">
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                      Total Bookings: {{getTotalBookings()}}
                    </div>
                  </div>
                  <div class="col" *ngIf="selectedReportType === 3">
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                      Total Revenue: ${{getTotalRevenue().toFixed(2)}}
                    </div>
                  </div>
                  <div class="col" *ngIf="selectedReportType === 4 || selectedReportType === 5">
                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                      Avg Occupancy: {{getAverageOccupancy().toFixed(1)}}%
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Rest of the original template for search, visualization, and data table -->
      </div>
    </div>
  </div>
</div>